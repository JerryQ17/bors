{% extends "base.html" %}

{% block title %}Help - Bors{% endblock %}

{% block head %}
<style>
    main {
        max-width: 80rem;
        width: 100%;
    }

    table {
        margin-block: var(--space-m);
    }

	tbody tr:last-child td {
	    border-bottom: none;
	}

    th,
    td {
        padding: var(--space-xs) var(--space-s);
        border-bottom: 1px solid var(--color-border-muted);
        word-break: break-all;
        overflow-wrap: break-word;
    }

    th {
        background-color: var(--color-bg-higlight);
    }

    ul {
        margin-block: var(--space-s);
        padding-inline-start: var(--space-m);
    }

    li {
        margin-block-end: var(--space-2xs);
    }
</style>
{% endblock %}

{% block body %}
<main>
    <h1>Bors</h1>

    <h2>Repositories</h2>
    <ul class="repos">
      {% for repo in repos %}
      <li>
        <a href="queue/{{ repo.name }}">{{ repo.name }}</a>
        {% if repo.treeclosed %} [TREECLOSED] {% endif %}
      </li>
      {% endfor %}
    </ul>

    <h2>Commands</h2>
    <p>Commands must be posted as comments on the PR and mention the bot account (<code>{{ cmd_prefix }}</code>).</p>

     <table>
         <thead>
             <tr>
                 <th>Command</th>
                 <th>Description</th>
             </tr>
         </thead>
         <tbody>
             <tr>
                 <td><code>info</code></td>
                 <td>Get information about the current PR</td>
             </tr>
             <tr>
                 <td><code>ping</code></td>
                 <td>Send a ping to bors to check responsiveness</td>
             </tr>
             <tr>
                 <td><code>help</code></td>
                 <td>Print help message with available commands</td>
             </tr>
             <tr>
                 <td><code>rollup=&lt;never|iffy|maybe|always&gt;</code></td>
                 <td>Mark the PR as "always", "maybe", "iffy", or "never" rollup-able</td>
             </tr>
             <tr>
                 <td><code>rollup</code></td>
                 <td>Short for <code>rollup=always</code></td>
             </tr>
             <tr>
                 <td><code>rollup-</code></td>
                 <td>Short for <code>rollup=maybe</code></td>
             </tr>
             <tr>
                 <td><code>p=&lt;priority&gt;</code></td>
                 <td>Set the priority of the approved PR (defaults to 0)</td>
             </tr>
             <tr>
                 <td><code>r=&lt;user&gt;</code></td>
                 <td>Approve the PR on behalf of the specified user</td>
             </tr>
             <tr>
                 <td><code>r+</code></td>
                 <td>Approve the PR and add it to the merge queue</td>
             </tr>
             <tr>
                 <td><code>r-</code></td>
                 <td>Reject the PR and remove it from the merge queue</td>
             </tr>
             <tr>
                 <td><code>retry</code></td>
                 <td>Retry the failed build</td>
             </tr>
             <tr>
                 <td><code>retry-</code></td>
                 <td>Cancel the retry</td>
             </tr>
             <tr>
                 <td><code>try</code></td>
                 <td>Run the build without merging</td>
             </tr>
             <tr>
                 <td><code>try-</code></td>
                 <td>Cancel the try build</td>
             </tr>
             <tr>
                 <td><code>delegate+</code></td>
                 <td>Delegate approval authority to another user</td>
             </tr>
             <tr>
                 <td><code>delegate-</code></td>
                 <td>Remove delegated approval authority</td>
             </tr>
             <tr>
                 <td><code>treeclosed=</code></td>
                 <td>Close the tree to new PRs</td>
             </tr>
             <tr>
                 <td><code>treeclosed-</code></td>
                 <td>Reopen the tree to new PRs</td>
             </tr>
         </tbody>
     </table>

    <h2>Examples</h2>
    <ul>
        <li><code>{{ cmd_prefix }} r+ p=1</code></li>
        <li><code>{{ cmd_prefix }} try parent=abc123</code></li>
        <li><code>{{ cmd_prefix }} try @rust-timer queue</code>: Short-hand for compile-perf benchmarking of PRs.</li>
    </ul>
</main>
{% endblock %}
